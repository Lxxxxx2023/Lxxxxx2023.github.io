import{i as z,j as Z,_ as J,a as X,b as q,k as K,c as Q,d as ee}from"./app.C-a7vcDG.js";import{a as te,u as ne}from"./chunks/vue-router.B4chQHFU.js";import{k as $,O as H,N as y,Q as h,Y as k,x as m,p as U,r as W,w as F,n as re,f as B,i as oe,q as M,z as D,l as ie,al as se,u as ae,M as T,R as N,a6 as le,au as ce,W as ue,L as de,X as j,v as w,S as I,F as fe,U as pe}from"./framework.BBlErx2S.js";import"./chunks/pinia.B4e18374.js";import{i as me,E as ve}from"./index.DVIHoDl2.js";import{d as _e}from"./chunks/dayjs.CCYrSalk.js";import{E as ge}from"./index.CkjrDduG.js";import"./chunks/vue-i18n.CICu_BrX.js";import"./chunks/nprogress.BahbDzmd.js";function L(e){return typeof e=="string"}function ye(e){return typeof e=="number"}function V(e,t="px"){return L(e)||ye(e)?L(e)&&/\D/g.test(e)?e:e+t:""}const he={class:"mb-15"},be={class:"flex items-center justify-end mt-2"},we=["data-path"],xe=$({__name:"HairyPostFooter",setup(e){const t=te();return(r,n)=>(y(),H("div",he,[n[3]||(n[3]=h("div",{class:"border-t border-gray-200 dark:border-gray-600"},null,-1)),h("div",be,[n[0]||(n[0]=h("div",{class:"i-ri-eye-fill mr-2"},null,-1)),n[1]||(n[1]=k(" 阅读次数 ")),h("span",{class:"waline-pageview-count mx-2","data-path":m(t).path},null,8,we),n[2]||(n[2]=k(" 次 "))])]))}});typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ce=e=>typeof e<"u";function je(e){return JSON.parse(JSON.stringify(e))}function $e(e,t,r,n={}){var o,i,a;const{clone:u=!1,passive:c=!1,eventName:l,deep:s=!1,defaultValue:d,shouldEmit:v}=n,f=U(),x=r||(f==null?void 0:f.emit)||((o=f==null?void 0:f.$emit)==null?void 0:o.bind(f))||((a=(i=f==null?void 0:f.proxy)==null?void 0:i.$emit)==null?void 0:a.bind(f==null?void 0:f.proxy));let C=l;t||(t="modelValue"),C=C||`update:${t.toString()}`;const P=p=>u?typeof u=="function"?u(p):je(p):p,g=()=>Ce(e[t])?P(e[t]):d,b=p=>{v?v(p)&&x(C,p):x(C,p)};if(c){const p=g(),R=W(p);let E=!1;return F(()=>e[t],S=>{E||(E=!0,R.value=P(S),re(()=>E=!1))}),F(R,S=>{!E&&(S!==e[t]||s)&&b(S)},{deep:s}),R}else return B({get(){return g()},set(p){b(p)}})}var Y="unified-overlay";function Pe(e="",t=document.body){const r=document.createElement("div");return e&&(r.id=e),t!==!1&&t.appendChild(r),r}var _={position:null,spaces:{}};function Ee(e=Y,t=!0){return _.spaces[e]||(_.spaces[e]=0),t?`${e}--${++_.spaces[e]}`:e}function Se(e=Y){return _.spaces[e]||0}function Ie(){let e,t;const r=new Promise((n,o)=>{e=n,t=o});return r.resolve=n=>(e(n),r),r.reject=t,r}function Te(){typeof window>"u"&&typeof document>"u"||document.addEventListener("click",e=>{if(e.target instanceof Element){const{left:t,top:r,width:n,height:o}=e.target.getBoundingClientRect();t>0||r>0?_.position={x:t+n/2,y:r+o/2}:_.position=null}else _.position=null;setTimeout(()=>_.position=null,64)})}function He(e){function t(n,o){function i(l,s){const d=Ie(),v=Ee(s.id,s.autoIncrement),f=Se(s.id),x=Pe(v,s.root);return e(n,l,Object.assign(s,{position:_.position,id:v,deferred:d,index:f,container:x})),d}let a;function u(l,s){return a||(a=i(l,s),a.finally(()=>a=void 0)),a}function c(l,s){const d={...o,...s};return d.only?u(l,d):i(l,d)}return c}function r(n,o,i){return t(n,i)(o)}return{define:t,render:r}}Te();function Re(){}function Ve(e){return new Promise(t=>setTimeout(t,e))}var O=function(){return O=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},O.apply(this,arguments)};function ke(e){return e.toLowerCase()}var Ne=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Oe=/[^A-Z0-9]+/gi;function Ae(e,t){t===void 0&&(t={});for(var r=t.splitRegexp,n=r===void 0?Ne:r,o=t.stripRegexp,i=o===void 0?Oe:o,a=t.transform,u=a===void 0?ke:a,c=t.delimiter,l=c===void 0?" ":c,s=G(G(e,n,"$1\0$2"),i,"\0"),d=0,v=s.length;s.charAt(d)==="\0";)d++;for(;s.charAt(v-1)==="\0";)v--;return s.slice(d,v).split("\0").map(u).join(l)}function G(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce(function(n,o){return n.replace(o,r)},e)}function De(e,t){var r=e.charAt(0),n=e.substr(1).toLowerCase();return t>0&&r>="0"&&r<="9"?"_"+r+n:""+r.toUpperCase()+n}function Fe(e,t){return t===void 0&&(t={}),Ae(e,O({delimiter:"",transform:De},t))}var Le={appContext:null},A=Symbol("OverlayScripts");function Ge(e={}){const{duration:t=0,immediate:r=!0,model:n="visible",automatic:o=!0}=e,i=oe(A,Ue(n,e)),a=Reflect.get(i,"in_dec"),{visible:u,deferred:c,vanish:l}=i;async function s(){return u.value=!1,await Ve(t),l==null||l(),Promise.resolve()}return!a&&o&&(c==null||c.then(s).catch(s)),!a&&r&&M(()=>u.value=!0),D(A,null),i}function Ue(e,t={}){const{reject:r="reject",resolve:n="resolve"}=t.events||{},o=U();if(!o)throw new Error("Please use usePrograms in component setup");const i=$e(o.props,e,o.emit,{passive:!0});return{reject:c=>{o==null||o.emit(r,c),i.value=!1},resolve:c=>{o==null||o.emit(n,c),i.value=!1},vanish:Re,visible:i,in_dec:!0}}function We(e){const{reject:t}=e.deferred||{},{vanish:r}=e,n=W(!1);function o(){r==null||r(),t==null||t()}return{resolve:e.deferred.resolve,reject:e.deferred.reject,deferred:e.deferred,visible:n,vanish:o}}function Be(e,t){var r;const n=(t==null?void 0:t.app)||((r=Le.appContext)==null?void 0:r.app);n&&(e.config.globalProperties=n.config.globalProperties,Object.assign(e._context,n._context))}var Me=He((e,t,r)=>{const{container:n,id:o,deferred:i,appContext:a}=r;function u(){l.unmount(),n.remove()}const c=$({name:Fe(o),setup:()=>{const s=We({vanish:u,deferred:i});D(A,s)},render:()=>ie(e,t)}),l=se(c);return Be(l,a),l.mount(n),u}),Ye=Me.render;const ze={class:"HairyImageViewer fixed inset-0 z-2000"},Ze=$({__name:"HairyImageViewer",props:me,setup(e){const t=e,{visible:r,resolve:n}=Ge({duration:1e3});return M(()=>{document.body.style.overflow="hidden"}),ae(()=>{document.body.style.overflow=""}),(o,i)=>(y(),H("div",ze,[m(r)?(y(),T(m(ve),le({key:0},t,{onClose:i[0]||(i[0]=a=>m(n)())}),null,16)):N("v-if",!0)]))}}),Je=$({__name:"HairyImageGlobal",props:{row:{default:"auto"},col:{default:"auto"},gap:{default:10},justify:{default:"space-evenly"},align:{default:"initial"}},setup(e){const t=e;ce(()=>({width:V(t.row),height:V(t.col),gap:V(t.gap),justify:t.justify,align:t.align}));function r(n){Ye(Ze,{urlList:[n],initialIndex:0})}return D("HairyImageGroup:preview",r),(n,o)=>ue(n.$slots,"default")}}),Xe={class:"flex gap-2"},qe={key:0,class:"tags flex-center gap-2 mt-2"},at=$({__name:"post",props:{header:{}},setup(e){const t=z(),r=B(()=>t.value.addons["valaxy-addon-waline"]),n=ne(),o=Z();function i(a){n.push(`/tags/${a}`)}return(a,u)=>{const c=J,l=X,s=de("router-view"),d=Je,v=xe,f=K,x=q,C=Q,P=ee;return y(),T(P,null,{default:j(()=>[w(c),w(l,{title:m(o).title},{description:j(()=>{var g;return[h("div",Xe,[h("span",null,"发表于 "+I(m(_e)(m(o).date).format("YYYY-MM-DD")),1),h("span",null,"本文字数 "+I(m(o).wordCount)+" 字",1),h("span",null,"阅读时长 "+I(m(o).readingTime)+" 分钟",1)]),(g=m(o).tags)!=null&&g.length?(y(),H("div",qe,[(y(!0),H(fe,null,pe(m(o).tags,b=>(y(),T(m(ge),{key:b,class:"dark:bg-dark-50 cursor-pointer",onClick:p=>i(b)},{default:j(()=>[k(I(b?a.$t(b,{},{missingWarn:!1}):""),1)]),_:2},1032,["onClick"]))),128))])):N("v-if",!0)]}),_:1},8,["title"]),w(x,null,{default:j(()=>{var g;return[w(d,null,{default:j(()=>[w(s)]),_:1}),(g=r.value.options)!=null&&g.pageview?(y(),T(v,{key:0})):N("v-if",!0)]}),slide:j(()=>[w(f)]),_:1}),w(C)]),_:1})}}});export{at as default};
